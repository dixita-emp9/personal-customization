import{j as y}from"./jsx-runtime-CfvKYIdH.js";import{r as m}from"./chunk-TMI4QPZX-JoEkPh98.js";const S="2025-07",v={storeDomain:"test",storefrontToken:"abc123",storefrontApiVersion:S,countryIsoCode:"US",languageIsoCode:"EN",getStorefrontApiUrl(){return""},getPublicTokenHeaders(){return{}},getShopifyDomain(){return""}},x=m.createContext(v);function D(){const e=m.useContext(x);if(!e)throw new Error("'useShop()' must be a descendent of <ShopifyProvider/>");return e}function T(e){const{countryIsoCode:c,languageIsoCode:a}=D(),o=a.includes("_")?a.replace("_","-"):`${a}-${c}`;if(!o)throw new Error("useMoney(): Unable to get 'locale' from 'useShop()', which means that 'locale' was not passed to '<ShopifyProvider/>'. 'locale' is required for 'useMoney()' to work");const t=parseFloat(e.amount);let n=!0;try{new Intl.NumberFormat(o,{style:"currency",currency:e.currencyCode})}catch(r){r instanceof RangeError&&r.message.includes("currency")&&(n=!1)}const{defaultFormatter:i,nameFormatter:u,narrowSymbolFormatter:f,withoutTrailingZerosFormatter:s,withoutCurrencyFormatter:p,withoutTrailingZerosOrCurrencyFormatter:g}=m.useMemo(()=>{const r=n?{style:"currency",currency:e.currencyCode}:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2};return{defaultFormatter:l(o,r),nameFormatter:l(o,{...r,currencyDisplay:"name"}),narrowSymbolFormatter:l(o,{...r,currencyDisplay:"narrowSymbol"}),withoutTrailingZerosFormatter:l(o,{...r,minimumFractionDigits:0,maximumFractionDigits:0}),withoutCurrencyFormatter:l(o,{minimumFractionDigits:2,maximumFractionDigits:2}),withoutTrailingZerosOrCurrencyFormatter:l(o,{minimumFractionDigits:0,maximumFractionDigits:0})}},[e.currencyCode,o,n]),d=r=>r.type==="currency",h=m.useMemo(()=>({original:()=>e,currencyCode:()=>e.currencyCode,localizedString:()=>{const r=i().format(t);return n?r:`${r} ${e.currencyCode}`},parts:()=>{const r=i().formatToParts(t);return n||r.push({type:"literal",value:" "},{type:"currency",value:e.currencyCode}),r},withoutTrailingZeros:()=>{const r=t%1===0?s().format(t):i().format(t);return n?r:`${r} ${e.currencyCode}`},withoutTrailingZerosAndCurrency:()=>t%1===0?g().format(t):p().format(t),currencyName:()=>{var r;return((r=u().formatToParts(t).find(d))==null?void 0:r.value)??e.currencyCode},currencySymbol:()=>{var r;return((r=i().formatToParts(t).find(d))==null?void 0:r.value)??e.currencyCode},currencyNarrowSymbol:()=>{var r;return((r=f().formatToParts(t).find(d))==null?void 0:r.value)??""},amount:()=>i().formatToParts(t).filter(r=>["decimal","fraction","group","integer","literal"].includes(r.type)).map(r=>r.value).join("")}),[e,t,n,u,i,f,p,s,g]);return m.useMemo(()=>new Proxy(h,{get:(r,w)=>{var C;return(C=Reflect.get(r,w))==null?void 0:C.call(null)}}),[h])}const F=new Map;function l(e,c){const a=JSON.stringify([e,c]);return function(){let o=F.get(a);if(!o){try{o=new Intl.NumberFormat(e,c)}catch(t){if(t instanceof RangeError&&t.message.includes("currency")){const n={...c};delete n.currency,delete n.currencyDisplay,delete n.currencySign,o=new Intl.NumberFormat(e,n)}else throw t}F.set(a,o)}return o}}function I({data:e,as:c,withoutCurrency:a,withoutTrailingZeros:o,measurement:t,measurementSeparator:n="/",...i}){if(!b(e))throw new Error("<Money/> needs a valid 'data' prop that has 'amount' and 'currencyCode'");const u=T(e),f=c??"div";let s=u.localizedString;return(a||o)&&(a&&!o?s=u.amount:!a&&o?s=u.withoutTrailingZeros:s=u.withoutTrailingZerosAndCurrency),y.jsxs(f,{...i,children:[s,t&&t.referenceUnit&&y.jsxs(y.Fragment,{children:[n,t.referenceUnit]})]})}function b(e){return typeof e.amount=="string"&&!!e.amount&&typeof e.currencyCode=="string"&&!!e.currencyCode}export{I as M};
